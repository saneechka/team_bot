# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

Team Bot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç YAML-—Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üéõÔ∏è –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
```
config/config.yaml
```

### –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞
bot:
  token: "YOUR_BOT_TOKEN"     # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
  debug: false                # –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (true/false)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
database:
  type: "sqlite3"            # –¢–∏–ø –ë–î (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ sqlite3)
  path: "./data/bot.db"      # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–∏—Å—Ç–µ–º—ã
admins:
  username:                  # –°–ø–∏—Å–æ–∫ username –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    - "admin_username1"      # –±–µ–∑ —Å–∏–º–≤–æ–ª–∞ @
    - "admin_username2"
```

## üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### Bot —Å–µ–∫—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `token` | string | ‚úÖ | –¢–æ–∫–µ–Ω –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç [@BotFather](https://t.me/botfather) |
| `debug` | boolean | ‚ùå | –í–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤ |

**–ü—Ä–∏–º–µ—Ä:**
```yaml
bot:
  token: "1234567890:ABCdefGhIJKlmNoPQRsTuVwXYz"
  debug: true  # –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

### Database —Å–µ–∫—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `type` | string | ‚úÖ | –¢–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `sqlite3`) |
| `path` | string | ‚úÖ | –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î |

**–ü—Ä–∏–º–µ—Ä—ã:**
```yaml
database:
  type: "sqlite3"
  path: "./data/bot.db"          # –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
  
# –∏–ª–∏
database:
  type: "sqlite3"
  path: "/var/lib/team_bot/bot.db"  # –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
```

### Admins —Å–µ–∫—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `username` | []string | ‚ùå | –ú–∞—Å—Å–∏–≤ Telegram username –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ |

**–ü—Ä–∏–º–µ—Ä:**
```yaml
admins:
  username:
    - "john_doe"        # username –±–µ–∑ @
    - "admin_user"
    - "team_lead"
```

## üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–º–µ—é—Ç **–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ YAML —Ñ–∞–π–ª–∞.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç | –ü—Ä–∏–º–µ—Ä |
|------------|----------------|---------|
| `TELEGRAM_BOT_TOKEN` | `bot.token` | `export TELEGRAM_BOT_TOKEN="1234567890:ABC..."` |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Linux/macOS:**
```bash
# –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
export TELEGRAM_BOT_TOKEN="your_token_here"

# –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc
echo 'export TELEGRAM_BOT_TOKEN="your_token_here"' >> ~/.bashrc
```

**Windows:**
```cmd
# –í—Ä–µ–º–µ–Ω–Ω–æ
set TELEGRAM_BOT_TOKEN=your_token_here

# –ü–æ—Å—Ç–æ—è–Ω–Ω–æ
setx TELEGRAM_BOT_TOKEN "your_token_here"
```

**Docker:**
```yaml
version: '3.8'
services:
  team_bot:
    image: team_bot:latest
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ‚ùå –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

```yaml
# –ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏!
bot:
  token: "1234567890:ABCdefGhIJKlmNoPQRsTuVwXYz"  # ‚ùå –ü–õ–û–•–û
```

### ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

**config/config.yaml (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):**
```yaml
bot:
  token: ""  # –ü—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—É–¥–µ—Ç –≤–∑—è—Ç–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
  debug: true

database:
  type: "sqlite3"
  path: "./data/bot.db"
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
export TELEGRAM_BOT_TOKEN="your_real_token"
go run ./cmd/bot
```

### .env —Ñ–∞–π–ª (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`):
```bash
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

–ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:
```bash
source .env
go run ./cmd/bot
```

## üéØ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (development)

**config/config.yaml:**
```yaml
bot:
  token: ""              # –ò–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
  debug: true            # –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É

database:
  type: "sqlite3"
  path: "./data/dev.db"  # –û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

admins:
  username:
    - "your_dev_username"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (testing)

**config/config.test.yaml:**
```yaml
bot:
  token: ""
  debug: false

database:
  type: "sqlite3"
  path: ":memory:"      # In-memory –±–∞–∑–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

admins:
  username:
    - "test_admin"
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω (production)

**config/config.yaml:**
```yaml
bot:
  token: ""              # –¢–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
  debug: false           # –û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É

database:
  type: "sqlite3"
  path: "/var/lib/team_bot/bot.db"  # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—É—Ç—å

admins:
  username:
    - "production_admin"
    - "team_lead"
```

## üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ö–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏

```go
// config/config.go
func LoadConfig(path string) (*Config, error) {
    config := &Config{}
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ YAML —Ñ–∞–π–ª–∞
    data, err := os.ReadFile(path)
    if err != nil {
        return nil, err
    }
    
    if err := yaml.Unmarshal(data, config); err != nil {
        return nil, err
    }
    
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if token := os.Getenv("TELEGRAM_BOT_TOKEN"); token != "" {
        config.Bot.Token = token
    }
    
    return config, nil
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.go

```go
func main() {
    cfg, err := config.LoadConfig("config/config.yaml")
    if err != nil {
        log.Fatalf("Error loading config: %v", err)
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    if cfg.Bot.Token == "" {
        log.Fatal("Bot token is required")
    }
}
```

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

```go
func (c *Config) Validate() error {
    if c.Bot.Token == "" {
        return errors.New("bot token is required")
    }
    
    if c.Database.Type != "sqlite3" {
        return errors.New("only sqlite3 database is supported")
    }
    
    if c.Database.Path == "" {
        return errors.New("database path is required")
    }
    
    return nil
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
go run ./cmd/config-check
```

## üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

```go
import "flag"

var (
    configPath = flag.String("config", "config/config.yaml", "Path to config file")
    debug      = flag.Bool("debug", false, "Enable debug mode")
)

func main() {
    flag.Parse()
    
    cfg, err := config.LoadConfig(*configPath)
    if err != nil {
        log.Fatalf("Error loading config: %v", err)
    }
    
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ —Ñ–ª–∞–≥–æ–≤
    if *debug {
        cfg.Bot.Debug = true
    }
}
```

### –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```go
func watchConfig(configPath string) {
    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
}
```

## üìù –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥

### 2. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ä–µ–¥—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –õ–æ–≥–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "config file not found"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
ls -la config/config.yaml

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
cp config/config.yaml.example config/config.yaml
```

### "invalid yaml format"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML
go run -c 'import yaml; yaml.safe_load(open("config/config.yaml"))'
```

### "bot token is empty"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $TELEGRAM_BOT_TOKEN

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
export TELEGRAM_BOT_TOKEN="your_token"
```
